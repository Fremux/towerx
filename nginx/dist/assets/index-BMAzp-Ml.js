import{f as j,j as r,r as f,v as M,a as A,w as y,x as F,B as x,F as N,s as B,d as V}from"./index-DXJGac9T.js";import{m as H,C as w,g as G}from"./index-BFkFjZue.js";import{g as T,T as q,a as L,b,c as O,d as P}from"./getStatusInfo-CfI_VPce.js";var I=j(function(e,n){const{htmlWidth:t,htmlHeight:i,alt:c,...l}=e;return r.jsx("img",{width:t,height:i,ref:n,alt:c,...l})});I.displayName="NativeImage";function X(s){const{loading:e,src:n,srcSet:t,onLoad:i,onError:c,crossOrigin:l,sizes:d,ignoreFallback:a}=s,[o,u]=f.useState("pending");f.useEffect(()=>{u(n?"loading":"pending")},[n]);const h=f.useRef(),C=f.useCallback(()=>{if(!n)return;g();const m=new Image;m.src=n,l&&(m.crossOrigin=l),t&&(m.srcset=t),d&&(m.sizes=d),e&&(m.loading=e),m.onload=p=>{g(),u("loaded"),i==null||i(p)},m.onerror=p=>{g(),u("failed"),c==null||c(p)},h.current=m},[n,l,t,d,i,c,e]),g=()=>{h.current&&(h.current.onload=null,h.current.onerror=null,h.current=null)};return M(()=>{if(!a)return o==="loading"&&C(),()=>{g()}},[o,C,a]),a?"loaded":o}var z=(s,e)=>s!=="loaded"&&e==="beforeLoadOrError"||s==="failed"&&e==="onError";function U(s,e=[]){const n=Object.assign({},s);for(const t of e)t in n&&delete n[t];return n}var J=j(function(e,n){const{fallbackSrc:t,fallback:i,src:c,srcSet:l,align:d,fit:a,loading:o,ignoreFallback:u,crossOrigin:h,fallbackStrategy:C="beforeLoadOrError",referrerPolicy:g,...m}=e,p=t!==void 0||i!==void 0,S=o!=null||u||!p,R=X({...e,crossOrigin:h,ignoreFallback:S}),Q=z(R,C),Y={ref:n,objectFit:a,objectPosition:d,...S?m:U(m,["onError","onLoad"])};return Q?i||r.jsx(A.img,{as:I,className:"chakra-image__placeholder",src:t,...Y}):r.jsx(A.img,{as:I,src:c,srcSet:l,crossOrigin:h,loading:o,referrerPolicy:g,className:"chakra-image",...Y})});J.displayName="Image";var k=j(function(e,n){const{templateAreas:t,gap:i,rowGap:c,columnGap:l,column:d,row:a,autoFlow:o,autoRows:u,templateRows:h,autoColumns:C,templateColumns:g,...m}=e,p={display:"grid",gridTemplateAreas:t,gridGap:i,gridRowGap:c,gridColumnGap:l,gridAutoColumns:C,gridColumn:d,gridRow:a,gridAutoFlow:o,gridAutoRows:u,gridTemplateRows:h,gridTemplateColumns:g};return r.jsx(A.div,{ref:n,__css:p,...m})});k.displayName="Grid";var E=j(function(e,n){const{columns:t,spacingX:i,spacingY:c,spacing:l,minChildWidth:d,...a}=e,o=y(),u=d?Z(d,o):D(t);return r.jsx(k,{ref:n,gap:l,columnGap:i,rowGap:c,templateColumns:u,...a})});E.displayName="SimpleGrid";function _(s){return typeof s=="number"?`${s}px`:s}function Z(s,e){return H(s,n=>{const t=F("sizes",n,_(n))(e);return n===null?null:`repeat(auto-fit, minmax(${t}, 1fr))`})}function D(s){return H(s,e=>e===null?null:`repeat(${e}, minmax(0, 1fr))`)}const K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAACWCAIAAACzY+a1AAAEB0lEQVR4nO3YQU/yShiG4SmlBSwYjEIQCyaSqmHl//8NLNgZSaORAmJQxCC0dihzFs3hEPQkX8KXlid5rl1r9YW5w2RQ63Q6gpBl0n4BtC8mhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J4TAiPCeExITwmhMeE8JgQHhPCY0J42bRfwH88zxNCNBqN+HK5XPZ6ve0HHMexLEsIoZQaj8fT6TSKouPjY9u2s9m93kiKo/d3KAnH4/H7+/vp6enmThAEpmm22+1fH57NZq1WS9f1fr//9PTkOA7i6L8i/Y00DEPXdSeTiWma2/eDIMjn8z+fV0pNJpNarZbP5w3DaDabi8VisVhgjf6L0k+4XC5N07y9vc3lctv3/28dfd9fr9fxtiaEMAzDNM2ddZzNZt1udz6fx5ePj48PDw9KqQRGJy/9jbRcLpfL5Z/34/W6v7+XUhYKhXq9Hq+dlFIIYRjG5knDMMIw3PmbJycng8Hg5uZmNpvN5/Pr62tN0xIYnbz0P4W/iqJISmmapuM47Xb76OjIdd0gCIQQ6/VaCLHdQ9O0n58w27bX67XnecPhsFarFQqFxEYn7EAT6rp+d3fXbDaz2Ww2m724uMjlcm9vb+LfFdxeOKVUJrP7RnRdt2374+Mjl8tVq9UkRyfsQBP+ZJpmvI/FR4/VarX5kZRye3Pb8H1fCBGGYRRFCY9O0oEm/Pr66na739/f8aVSanPEyOfzmUxmc4iQUoZhuDlibPi+//r6Wq/XdV2Pv/YlNjphB5rQsqxCoeB5XhiGq9VqMBhEUVSpVIQQmUzm7OxsNBr5vi+l7Pf7lmXtrKNS6vn5uVgsVqvVRqPx+fk5nU6TGZ289E+kv9I07erqajQa9Xq9+BzvOM7m/yDn5+dKKdd1hRClUuny8nLn119eXqSUrVZLCFEsFiuVynA4LJVKf7Lp7Tk6eVqn00n7NdBeDnQjpT/HhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEB4TwmNCeEwIjwnhMSE8JoTHhPCYEN4/cnznZiQb6hsAAAAASUVORK5CYII=",v=({imageUrl:s,status:e,title:n,onClick:t})=>r.jsxs(x,{background:"#F9F9FA",borderRadius:"15px",overflow:"hidden",cursor:e==="completed"?"pointer":void 0,onClick:e==="completed"?t:void 0,transition:"transform 0.2s",_hover:{transform:e==="completed"?"scale(1.03)":""},children:[r.jsx(J,{src:s,alt:n,width:"100%",height:"150px",objectFit:"cover",fallbackSrc:K}),r.jsxs(N,{direction:"column",p:4,children:[r.jsx(B,{fontSize:"lg",mb:2,children:n}),r.jsx(N,{justifyContent:"center",fontWeight:600,bg:T(e).bgColor,color:"#373645",border:`1px solid ${T(e).borderColor}`,px:2,py:1,w:"-webkit-fit-content",borderRadius:"20px",textAlign:"center",children:T(e).title})]})]}),re=()=>{const[s,e]=f.useState([]),[n,t]=f.useState(!0),[i,c]=f.useState(null),l=V();if(f.useEffect(()=>{(async()=>{try{t(!0);const o=await G();e(o.data)}catch(o){console.log(o),c("Не удалось загрузить данные")}finally{t(!1)}})()},[]),n)return r.jsx(w,{children:"Загрузка..."});if(i)return r.jsx(w,{children:i});const d=Array.from(new Set(s.flatMap(a=>a.object_classes.length===1?a.object_classes:[])));return r.jsx(w,{children:r.jsxs(q,{variant:"enclosed",children:[r.jsxs(L,{children:[r.jsx(b,{children:"Все"}),d.map(a=>r.jsx(b,{children:a},a)),r.jsx(b,{children:"Несколько классов"})]}),r.jsxs(O,{children:[r.jsx(P,{children:r.jsx(x,{maxH:"80svh",overflowY:"auto",children:r.jsx(E,{columns:[1,2,3,4,5],spacing:4,children:s.map((a,o)=>r.jsx(v,{imageUrl:a.preview_s3_url,status:a.status,title:a.name,onClick:()=>l(`/file/${a.id}`)},o))})})}),d.map(a=>r.jsx(P,{children:r.jsx(x,{maxH:"80svh",overflowY:"auto",children:r.jsx(E,{overflowY:"scroll",columns:[1,2,3,4,5],spacing:4,children:s.filter(o=>o.object_classes.length===1&&o.object_classes[0]===a).map((o,u)=>r.jsx(v,{imageUrl:o.preview_s3_url,status:o.status,title:o.name,onClick:()=>l("/file/:id")},u))})})},a)),r.jsx(P,{children:r.jsx(x,{maxH:"80svh",overflowY:"auto",children:r.jsx(E,{overflowY:"scroll",columns:[1,2,3,4,5],spacing:4,children:s.filter(a=>a.object_classes.length>1).map((a,o)=>r.jsx(v,{imageUrl:a.preview_s3_url,status:a.status,title:a.name,onClick:()=>l("/file/:id")},o))})})})]})]})})};export{re as default};
