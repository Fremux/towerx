import{h as E,i as W,r as m,k as G,c as H,f as P,u as M,o as N,b as D,j as t,a as S,m as z,l as y,n as A,p as V,q as R,g as J,d as U,F as w,s as F,I as K,t as Q}from"./index-DXJGac9T.js";import{u as X,C as Y,p as ee}from"./index-BFkFjZue.js";function te(r){const{theme:s}=E(),a=W();return m.useMemo(()=>G(s.direction,{...a,...r}),[r,s.direction,a])}var[se,re]=H({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[ae,$]=H({strict:!1,name:"FormControlContext"});function ne(r){const{id:s,isRequired:a,isInvalid:n,isDisabled:e,isReadOnly:i,...c}=r,u=m.useId(),o=s||`field-${u}`,f=`${o}-label`,C=`${o}-feedback`,p=`${o}-helptext`,[v,b]=m.useState(!1),[j,l]=m.useState(!1),[d,x]=m.useState(!1),k=m.useCallback((h={},g=null)=>({id:p,...h,ref:z(g,L=>{L&&l(!0)})}),[p]),T=m.useCallback((h={},g=null)=>({...h,ref:g,"data-focus":y(d),"data-disabled":y(e),"data-invalid":y(n),"data-readonly":y(i),id:h.id!==void 0?h.id:f,htmlFor:h.htmlFor!==void 0?h.htmlFor:o}),[o,e,d,n,i,f]),q=m.useCallback((h={},g=null)=>({id:C,...h,ref:z(g,L=>{L&&b(!0)}),"aria-live":"polite"}),[C]),O=m.useCallback((h={},g=null)=>({...h,...c,ref:g,role:"group","data-focus":y(d),"data-disabled":y(e),"data-invalid":y(n),"data-readonly":y(i)}),[c,e,d,n,i]),_=m.useCallback((h={},g=null)=>({...h,ref:g,role:"presentation","aria-hidden":!0,children:h.children||"*"}),[]);return{isRequired:!!a,isInvalid:!!n,isReadOnly:!!i,isDisabled:!!e,isFocused:!!d,onFocus:()=>x(!0),onBlur:()=>x(!1),hasFeedbackText:v,setHasFeedbackText:b,hasHelpText:j,setHasHelpText:l,id:o,labelId:f,feedbackId:C,helpTextId:p,htmlProps:c,getHelpTextProps:k,getErrorMessageProps:q,getRootProps:O,getLabelProps:T,getRequiredIndicatorProps:_}}var ie=P(function(s,a){const n=M("Form",s),e=N(s),{getRootProps:i,htmlProps:c,...u}=ne(e),o=D("chakra-form-control",s.className);return t.jsx(ae,{value:u,children:t.jsx(se,{value:n,children:t.jsx(S.div,{...i({},a),className:o,__css:n.container})})})});ie.displayName="FormControl";var oe=P(function(s,a){const n=$(),e=re(),i=D("chakra-form__helper-text",s.className);return t.jsx(S.div,{...n==null?void 0:n.getHelpTextProps(s,a),__css:e.helperText,className:i})});oe.displayName="FormHelperText";function le(r){const{isDisabled:s,isInvalid:a,isReadOnly:n,isRequired:e,...i}=de(r);return{...i,disabled:s,readOnly:n,required:e,"aria-invalid":A(a),"aria-required":A(e),"aria-readonly":A(n)}}function de(r){var s,a,n;const e=$(),{id:i,disabled:c,readOnly:u,required:o,isRequired:f,isInvalid:C,isReadOnly:p,isDisabled:v,onFocus:b,onBlur:j,...l}=r,d=r["aria-describedby"]?[r["aria-describedby"]]:[];return e!=null&&e.hasFeedbackText&&(e!=null&&e.isInvalid)&&d.push(e.feedbackId),e!=null&&e.hasHelpText&&d.push(e.helpTextId),{...l,"aria-describedby":d.join(" ")||void 0,id:i??(e==null?void 0:e.id),isDisabled:(s=c??v)!=null?s:e==null?void 0:e.isDisabled,isReadOnly:(a=u??p)!=null?a:e==null?void 0:e.isReadOnly,isRequired:(n=o??f)!=null?n:e==null?void 0:e.isRequired,isInvalid:C??(e==null?void 0:e.isInvalid),onFocus:V(e==null?void 0:e.onFocus,b),onBlur:V(e==null?void 0:e.onBlur,j)}}var I=P(function(s,a){const{htmlSize:n,...e}=s,i=M("Input",e),c=N(e),u=le(c),o=D("chakra-input",s.className);return t.jsx(S.input,{size:n,...u,__css:i.field,ref:a,className:o})});I.displayName="Input";I.id="Input";function ce(r,s,a){return(r-s)*100/(a-s)}R({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});R({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});var ue=R({"0%":{left:"-40%"},"100%":{left:"100%"}}),he=R({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function Ce(r){const{value:s=0,min:a,max:n,valueText:e,getValueText:i,isIndeterminate:c,role:u="progressbar"}=r,o=ce(s,a,n);return{bind:{"data-indeterminate":c?"":void 0,"aria-valuemax":n,"aria-valuemin":a,"aria-valuenow":c?void 0:s,"aria-valuetext":(()=>{if(s!=null)return typeof i=="function"?i(s,o):e})(),role:u},percent:o,value:s}}var[me,fe]=H({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),xe=P((r,s)=>{const{min:a,max:n,value:e,isIndeterminate:i,role:c,...u}=r,o=Ce({value:e,min:a,max:n,isIndeterminate:i,role:c}),C={height:"100%",...fe().filledTrack};return t.jsx(S.div,{ref:s,style:{width:`${o.percent}%`,...u.style},...o.bind,...u,__css:C})}),Z=P((r,s)=>{var a;const{value:n,min:e=0,max:i=100,hasStripe:c,isAnimated:u,children:o,borderRadius:f,isIndeterminate:C,"aria-label":p,"aria-labelledby":v,"aria-valuetext":b,title:j,role:l,...d}=N(r),x=M("Progress",r),k=f??((a=x.track)==null?void 0:a.borderRadius),T={animation:`${he} 1s linear infinite`},_={...!C&&c&&u&&T,...C&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${ue} 1s ease infinite normal none running`}},h={overflow:"hidden",position:"relative",...x.track};return t.jsx(S.div,{ref:s,borderRadius:k,__css:h,...d,children:t.jsxs(me,{value:x,children:[t.jsx(xe,{"aria-label":p,"aria-labelledby":v,"aria-valuetext":b,min:e,max:i,value:n,isIndeterminate:C,css:_,borderRadius:k,title:j,role:l}),o]})})});Z.displayName="Progress";const B=({children:r,...s})=>t.jsx(J,{variant:s.variant?s.variant:"baseStyle",...s,children:r}),pe=({strokeColor:r="#161F29",...s})=>t.jsx("svg",{width:"8",height:"8",viewBox:"0 0 8 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",...s,children:t.jsx("path",{d:"M1.14215 6.79913L6.799 1.14228M1.14215 1.14228L6.799 6.79913",stroke:r,strokeWidth:"1.5",strokeLinecap:"round"})}),ge=({...r})=>t.jsxs("svg",{width:"36",height:"35",viewBox:"0 0 36 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",...r,children:[t.jsxs("g",{"clip-path":"url(#clip0_58_878)",children:[t.jsx("path",{d:"M27.3337 10.7606C27.0699 10.6853 26.8292 10.5453 26.6333 10.3532C26.4374 10.1612 26.2927 9.92322 26.2123 9.66097C25.7657 8.14729 25.0166 6.73994 24.0104 5.52411C23.0043 4.30827 21.7618 3.30922 20.3584 2.58741C18.9549 1.8656 17.4196 1.43604 15.8454 1.32472C14.2711 1.21339 12.6906 1.42263 11.1996 1.93976C9.70853 2.45689 8.33789 3.27116 7.17061 4.33331C6.00334 5.39545 5.0637 6.68338 4.40854 8.11915C3.75339 9.55493 3.39636 11.1087 3.35904 12.6865C3.32172 14.2642 3.6049 15.8331 4.19143 17.2983C4.32618 17.6066 4.35519 17.9508 4.27395 18.2774C4.19271 18.6039 4.00578 18.8944 3.74227 19.1037C2.58104 19.9655 1.67442 21.1253 1.11836 22.4603C0.562308 23.7952 0.377507 25.2556 0.583517 26.687C0.905011 28.622 1.90961 30.3777 3.41499 31.6353C4.92037 32.8929 6.82674 33.5691 8.7881 33.5412H16.5421C16.9288 33.5412 17.2998 33.3875 17.5733 33.114C17.8467 32.8406 18.0004 32.4696 18.0004 32.0828C18.0004 31.6961 17.8467 31.3251 17.5733 31.0516C17.2998 30.7782 16.9288 30.6245 16.5421 30.6245H8.7881C7.52851 30.6551 6.29964 30.2334 5.32421 29.4359C4.34878 28.6384 3.69133 27.5178 3.47102 26.2772C3.33131 25.3654 3.44454 24.4327 3.79837 23.5807C4.15221 22.7288 4.73308 21.9903 5.47768 21.4458C6.25982 20.8612 6.8256 20.0334 7.08613 19.0923C7.34667 18.1513 7.2872 17.1504 6.91706 16.2468C6.1852 14.3141 6.14757 12.1871 6.8106 10.2297C7.34026 8.69639 8.28875 7.34204 9.5486 6.32009C10.8085 5.29813 12.3293 4.64941 13.9389 4.44743C14.3123 4.39936 14.6883 4.37501 15.0648 4.37451C16.9505 4.36829 18.7875 4.97306 20.3007 6.09825C21.8139 7.22344 22.922 8.80853 23.4589 10.6162C23.6685 11.3051 24.0462 11.931 24.5579 12.4376C25.0696 12.9442 25.6993 13.3156 26.3902 13.5183C28.0811 14.0184 29.5789 15.0231 30.6831 16.3979C31.7872 17.7728 32.4451 19.4521 32.5685 21.2111C32.6919 22.9701 32.275 24.7248 31.3736 26.2404C30.4722 27.7559 29.1293 28.9599 27.5248 29.6912C27.2873 29.8128 27.0888 29.9987 26.9519 30.2276C26.8149 30.4566 26.7451 30.7194 26.7504 30.9862V30.9862C26.7476 31.2275 26.8054 31.4657 26.9185 31.6788C27.0317 31.892 27.1966 32.0733 27.3981 32.2061C27.5996 32.3389 27.8312 32.419 28.0717 32.439C28.3122 32.459 28.5539 32.4183 28.7746 32.3206C34.8033 29.4228 38.0787 21.8001 32.9746 14.4356C31.5692 12.6023 29.5785 11.3054 27.3337 10.7606V10.7606Z",fill:"#373645"}),t.jsx("path",{d:"M27.781 24.3642C28.0544 24.0907 28.208 23.7198 28.208 23.3332C28.208 22.9465 28.0544 22.5756 27.781 22.3021L25.4681 19.9892C24.6477 19.169 23.5351 18.7083 22.375 18.7083C21.2149 18.7083 20.1023 19.169 19.2819 19.9892L16.9689 22.3021C16.7033 22.5772 16.5563 22.9455 16.5596 23.3279C16.5629 23.7103 16.7163 24.076 16.9867 24.3464C17.2571 24.6168 17.6229 24.7702 18.0052 24.7735C18.3876 24.7768 18.756 24.6298 19.031 24.3642L20.9167 22.4786V33.5415C20.9167 33.9283 21.0703 34.2992 21.3438 34.5727C21.6173 34.8462 21.9882 34.9998 22.375 34.9998C22.7618 34.9998 23.1327 34.8462 23.4062 34.5727C23.6797 34.2992 23.8333 33.9283 23.8333 33.5415V22.4786L25.7189 24.3642C25.9924 24.6376 26.3633 24.7912 26.75 24.7912C27.1367 24.7912 27.5076 24.6376 27.781 24.3642Z",fill:"#373645"})]}),t.jsx("defs",{children:t.jsx("clipPath",{id:"clip0_58_878",children:t.jsx("rect",{width:"35",height:"35",fill:"white",transform:"translate(0.5)"})})})]}),ve=r=>t.jsxs("svg",{...r,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[t.jsx("path",{d:"M8.44091 5.76165C8.81422 4.17963 10.266 3 12 3C13.734 3 15.1858 4.17963 15.5591 5.76165L15.7151 5.79339C18.1003 6.27888 19.9998 8.03831 20.6215 10.3381C21.1262 12.2049 21.1262 14.1676 20.6215 16.0344C19.9998 18.3342 18.1003 20.0936 15.7151 20.5791L15.2593 20.6718C13.1095 21.1094 10.8905 21.1094 8.74072 20.6718L8.28493 20.5791C5.89969 20.0936 4.0002 18.3342 3.3785 16.0344C2.87383 14.1676 2.87383 12.2049 3.3785 10.338C4.0002 8.0383 5.89968 6.27888 8.28493 5.79339L8.44091 5.76165Z",stroke:"white","stroke-width":"1.5","stroke-linejoin":"round"}),t.jsx("path",{d:"M9.5 13C9.5 11.6193 10.6193 10.5 12 10.5C13.3807 10.5 14.5 11.6193 14.5 13C14.5 14.3807 13.3807 15.5 12 15.5C10.6193 15.5 9.5 14.3807 9.5 13Z",stroke:"white","stroke-width":"1.5"})]}),je=()=>{const r=U(),s=X({base:!0,md:!1}),[a,n]=m.useState([]),[e,i]=m.useState(!1),c=m.useRef(null),u=m.useRef(null),o=te(),[f,C]=m.useState(0),p=l=>{const d=l.target.files?Array.from(l.target.files):[];d.length>0&&n(x=>[...x,...d])},v=l=>{l.current&&l.current.click()},b=l=>{n(d=>d.filter((x,k)=>k!==l))},j=async()=>{if(a.length===0){o({title:"Ошибка!",description:"Пожалуйста, выберите файлы перед загрузкой.",status:"warning",duration:3e3,isClosable:!0});return}i(!0);try{await ee(a,l=>{const{loaded:d,total:x}=l;x&&C(Math.round(d/x*100))}),o({title:"Успешно!",description:"Файлы загружены.",status:"success",duration:3e3,isClosable:!0}),r("/home")}catch{o({title:"Ошибка при загрузке!",description:"Не удалось загрузить файлы. Попробуйте снова.",status:"error",duration:3e3,isClosable:!0})}finally{i(!1),C(0)}};return t.jsx(Y,{children:t.jsxs(w,{direction:"column",w:"100%",h:"100%",children:[t.jsx(F,{fontSize:"18px",fontWeight:"700",mb:"15px",children:"Загрузка изображений для детекции"}),t.jsxs(w,{h:"100%",direction:"column",align:"center",justify:"center",borderWidth:"2px",borderColor:"blue.500",borderStyle:"dashed",borderRadius:"md",p:"6",w:"100%",textAlign:"center",position:"relative",children:[t.jsx(K,{as:ge,boxSize:12,color:"blue.500"}),t.jsxs(F,{fontSize:"18px",mt:"4",children:["Перетащите файл сюда ",t.jsx("br",{})," ",t.jsx("b",{children:"PNG, JPG, JPEG, ZIP, RAR"})]}),t.jsx(F,{fontSize:"18px",mt:"4",children:"или"}),t.jsx(I,{type:"file",accept:".png, .jpg, .jpeg, .zip, .rar",multiple:!0,ref:c,style:{display:"none"},onChange:l=>p(l)}),t.jsx(B,{mt:4,bg:"red.500",color:"white",onClick:()=>v(c),children:"Выберите файлы"})]}),s&&t.jsxs(w,{direction:"column",align:"center",justify:"center",w:"100%",mt:"6",children:[t.jsx(B,{bg:"red.500",color:"white",leftIcon:t.jsx(ve,{fill:"white"}),onClick:()=>v(u),children:"Открыть камеру"}),t.jsx(I,{type:"file",accept:"image/*",capture:!0,ref:u,style:{display:"none"},onChange:l=>p(l)})]}),a.length>0&&t.jsxs(w,{direction:"column",align:s?"center":"",w:"100%",mt:"6",children:[t.jsx(F,{children:"Выбранные файлы:"}),a.map((l,d)=>t.jsxs(w,{gap:"15px",align:"center",children:[t.jsx(F,{fontSize:"sm",noOfLines:1,children:l.name}),t.jsx(Q,{colorScheme:"transparent",icon:t.jsx(pe,{}),"aria-label":"Удалить файл",onClick:()=>b(d)})]},d)),e?t.jsx(Z,{borderRadius:"15px",value:f,size:"sm",mt:"4"}):t.jsx(B,{mt:"4",color:"white",onClick:j,children:"Загрузить"})]})]})})};export{je as default};
